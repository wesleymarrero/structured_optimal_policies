# structured_optimal_policies

This repository includes the code and data sets used in ***An Analysis of Structured Optimal Policies for Hypertension Treatment
Planning: The Tradeoff Between Optimality and Interpretability***. The repository contains three main directories.

## A. Data
This directory includes the input files for the analyses conducted in the paper. The directory contains the following files:
1. **lifedata.csv** - this file contains the life expectancy for adults in the USA with ages 40 to 60
3. **strokedeathdata.csv** - this file contains the likelihood of death due to a stroke for adults in the USA with ages 40 to 60
4. **chddeathdata.csv** - this file contains the likelihood of death due to a coronary heart disease (CHD) event for adults in the USA with ages 40 to 60
5. **alldeathdata.csv** - this file contains the likelihood of death not related to atherosclerotic cardiovascular disease (ASCVD) for adults in the USA with ages 40 to 60
6. **Continuous NHANES** - this sub-directory contains the following files:
    - **Continuous_NHANES_Data_Extraction_and_Filtering.R** - this R script contains the code to obtain the final patient dataset from the files publicly available at: https://wwwn.cdc.gov/nchs/nhanes/continuousnhanes/default.aspx
    - **Continuous NHANES Forecasted Dataset.csv** - this file is the end result of the Continuous_NHANES_Data_Extraction_and_Filtering.R script, which was used as the patient dataset in the analyses
  
## B. Analyses
This directory includes the scripts used to conduct the analyses in the paper. The directory contains the following files:
1. **hypertension_treatment_monotone_mdp.py** - this Python script serves as the **master file** for the analyses. Interested readers are encouraged to start with this file
2. **patient_simulation.py** - this script is essentially a continuation of the hypertension_treatment_monotone_mdp.py file. It was made a function to allow for parallel computing
3. **ascvd_risk.py** - this script estimates the risk for ASCVD event for each patient at every state and decision epoch
4. **transition_probabilities.py** - this script estimates the transition probabilities for each patient included in the analysis
5. **sbp_reductions_drugtype.py** - this script estimates the systolic blood pressure (SBP) reductions for each treatment
6. **dbp_reductions_drugtype.py** - this script estimates the diastolic blood pressure (DBP) reductions for each treatment
7. **post_treatment_risk.py** - this script estimates the risk reductions for each treatment
8. **optimal_monotone_mdp.py** - this script contains functions to solve the primal and dual formulations of the linear programs and mixed-integer programs considered in the paper
9. **policy_evaluation.py** - this script evaluates a policy in terms of expected quality-adjusted life years (QALYs) and expected ASCVD events
10. **aha_2017_guideline.py** - this script mimics the treatment recommendations from the 2017 Hypertension Clinical Practice Guidelines

*Please note that the scripts were listed in the order they are used in the analyses, starting from the master file hypertension_treatment_monotone_mdp.py.*

## C. Results
This directory includes the scripts used to extract the results presented in the paper. The directory contains the following files:
1. **case_study_results.py** - this script produces most of the outputs (except for the hypothesis testing results) included in the paper
2. **case_study_plots.py** - this script includes the functions of the plots generated in the case_study_results.py file
3. **hypothesis_testing.R** - this script performs hypothesis testing on the observations in the Price of Interpretability per Policy.csv generated by the case_study_results.py file. Note that R was used instead of Python because the functions in R offer confidence intervals besides P-values (like the functions available in Python)

*Please note that the scripts were listed in the order they are used in the examination of results, starting from case_study_results.py.*
